!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery),function(a){"use strict";var b=a.oblique||(a.oblique={});b.CONFIG={module:"oblique",title:"EFV-EIS",description:"EFV-EIS is a technical prototype concept in the scope of the electronic information system for the Swiss federal budget.",home:"#/home",api:{url:"http://localhost:3000/api",logs:"/logs",sendCredentials:!1},defaults:{locale:"en",state:"home",layout:"default",http:{timeout:1e4}}}}(window,document),function(){"use strict";angular.module("oblique",["ngCookies","ui.bootstrap","ui.router","pascalprecht.translate","satellizer","ui.slider","checklist-model","chart.js","highcharts-ng","oblique.app-templates","oblique.core","oblique.auth","oblique.home","oblique.charts","oblique.stats"]).constant("CONFIG",window.oblique.CONFIG).config(["$logProvider",function(a){a.debugEnabled(!0)}]).config(["CONFIG","$authProvider",function(a,b){b.signupUrl=a.api.url+"/auth/register",b.signupRedirect="/",b.loginUrl=a.api.url+"/auth/login",b.loginRedirect="/",b.logoutRedirect="/",b.tokenPrefix=a.module}]).config(["$httpProvider","CONFIG",function(a,b){b.dev&&b.dev.sendCredentials,a.interceptors.push("HttpInterceptor")}]).config(["CONFIG","$urlRouterProvider",function(a,b){b.otherwise("/"+a.defaults.state)}]).config(["CONFIG","$translateProvider",function(a,b){b.useStaticFilesLoader({prefix:"app/i18n/locale-",suffix:".json"}),b.preferredLanguage(a.defaults.locale),b.useLocalStorage()}]).config(["CONFIG","LoadingServiceProvider",function(a,b){b.setTimeout(a.defaults.http.timeout)}]).config(function(){Chart.defaults.global.animation=!1,Chart.defaults.global.maintainAspectRatio=!0,Highcharts.setOptions({plotOptions:{series:{animation:!1}},legend:{enabled:!1},title:{text:""}})}).run(["$httpDecorator",function(a){a.decorate()}]),angular.element(document).ready(function(){angular.bootstrap(document,["oblique"])})}(),angular.module("oblique.app-templates",["auth/auth.tpl.html","charts/chartjs.tpl.html","charts/charts.tpl.html","charts/highchart.tpl.html","home/home.tpl.html","stats/stats.tpl.html"]),angular.module("auth/auth.tpl.html",[]).run(["$templateCache",function(a){a.put("auth/auth.tpl.html",'<form novalidate class="form-horizontal" role="form" name="loginForm" ng-submit="login()">\n	<div class="cover-header">\n		<h1>{{\'states.auth.title\' | translate}}</h1>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-3 control-label">Email</label>\n		<div class="col-sm-9">\n			<input ng-model="user.email" type="email" class="form-control" placeholder="Email" required />\n		</div>\n	</div>\n	<div class="form-group">\n		<label class="col-sm-3 control-label">Password</label>\n		<div class="col-sm-9">\n			<input ng-model="user.password" type="password" class="form-control" placeholder="Password" required />\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="col-sm-offset-3 col-sm-9">\n			<div class="checkbox">\n				<label>\n					<input type="checkbox">Remember me\n				</label>\n			</div>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="col-sm-offset-3 col-sm-9">\n			<button type="submit" class="btn btn-primary">Sign in</button>\n			<button type="reset" class="btn btn-link">Forgot password?</button>\n		</div>\n	</div>\n</form>\n<form novalidate role="form" name="registerForm" ng-submit="register()">\n	<h3 class="page-header" translate translate-values="{\'title\': appController.title}">states.auth.register.title</h3>\n	<div class="form-group">\n		<input type="email" ng-model="user.email" placeholder="Email" required="" class="form-control"/>\n	</div>\n	<div class="form-group">\n		<input type="password" ng-model="user.password" placeholder="Password" required="" class="form-control"/>\n	</div>\n	<div class="form-group">\n		<input type="text" ng-model="user.firstname" placeholder="First Name" class="form-control"/>\n	</div>\n	<div class="form-group">\n		<input type="text" ng-model="user.lastname" placeholder="Last Name" required="" class="form-control"/>\n	</div>\n	<div class="form-group">\n		<button type="submit" class="btn btn-lg btn-primary btn-block">{{\'states.auth.register.submit\' | translate}}</button>\n	</div>\n</form>\n')}]),angular.module("charts/chartjs.tpl.html",[]).run(["$templateCache",function(a){a.put("charts/chartjs.tpl.html",'<canvas class="chart-base" chart-type="chartjsConfig.type"\n        data="chartjsConfig.data" labels="chartjsConfig.labels" series="chartjsConfig.series"\n        legend="false" click="onClick" colours="chartjsColors" options="chartjsConfig.options">\n</canvas>\n')}]),angular.module("charts/charts.tpl.html",[]).run(["$templateCache",function(a){a.put("charts/charts.tpl.html",'<div class="column-layout column-layout-3 spacer-top">\n\n	<div class="column-left hidden-print" data-column="left" role="complementary">\n        <div class="default-layout">\n            <div class="panel-group" id="series" role="tablist">\n                <div class="panel panel-default">\n                    <div class="panel-heading">\n                        <h4 class="panel-title">\n                            <a class="collapsed" data-toggle="collapse" data-parent="#series" href="#seriesBody">Series</a>\n                        </h4>\n                    </div>\n                    <div id="seriesBody" class="panel-collapse collapse in" role="tabpanel">\n                        <div class="panel-body">\n                            <labeled-checkbox ng-repeat="serie in series"\n                                              ng-model="selection.series"\n                                              value="serie" label="{{serie.title}}" checkbox-id="{{serie.id}}""></labeled-checkbox>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n	</div>\n\n	<div class="column-main">\n        <div class="default-layout">\n            <div class="panel panel-default">\n                <div class="panel-heading">\n                    <ul class="list-unstyled list-inline  navbar-controls pull-right" role="menu">\n                        <li role="menuitem" tooltip="Grafik speichern">\n                            <a href="" role="button">\n                                <span class="fa fa-save fa-2x"></span>\n                                <span class="control-label">Grafik speichern</span>\n                            </a>\n                        </li>\n                        <li role="menuitem" tooltip="Datei exportieren">\n                            <a href="" role="button">\n                                <span class="fa fa-file-excel-o fa-2x"></span>\n                                <span class="control-label">Datei exportieren</span>\n                            </a>\n                        </li>\n                        <li role="menuitem" tooltip="Drucken">\n                            <a href="" role="button">\n                                <span class="fa fa-print fa-2x"></span>\n                                <span class="control-label">Drucken</span>\n                            </a>\n                        </li>\n                    </ul>\n                    <h3 class="panel-title">\n                        Ausgaben nach Aufgabengebieten (in Mio.)\n                    </h3>\n                </div>\n                <div class="panel-body">\n                    <div ui-view></div>\n                </div>\n                <div class="panel-footer">\n                    <label>Zeitraum</label>\n                    <range-slider min="{{range.min}}" max="{{range.max}}" step="1" ng-model="range.current"></range-slider>\n                </div>\n                <div class="panel-footer">\n                    <label>Darstellung</label>\n                    <div class="radio radio-inline">\n                        <div class="radio">\n                            <input type="radio" ng-model="chartjsConfig.type" value="Line" id="chart-type-line">\n                            <label for="chart-type-line">Lines</label>\n                        </div>\n                        <div class="radio">\n                            <input type="radio" ng-model="chartjsConfig.type" value="Bar" id="chart-type-bar">\n                            <label for="chart-type-bar">Bars</label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n	</div>\n\n	<div class="column-right hidden-print" data-column="left" role="complementary">\n        <div class="default-layout">\n            <ul class="list-unstyled" data-provides="activable">\n                <li class="strate-item panel panel-secondary">\n                    <a href="#" class="strate-heading panel-heading">\n                        <span class="strate-icon toggle"></span>\n                        <span>Allgemeine Erl&auml;uterungen</span>\n                    </a>\n                    <div class="strate-panel strate-extension">\n                        <div class="panel-body">\n                            <p>\n                                <span>Das Aufgabengebiet Beziehungen zum Ausland - Internatio-nale Zusammenarbeit umfasst schwergewichtig die Ent-wicklungshilfe (60% der Ausgaben), ...</span>\n                                <a href="#" class="pull-right">\n                                    <span>mehr</span>\n                                    <span class="fa fa-chevron-right"></span>\n                                </a>\n                            </p>\n                            <p>\n                                <span>Im Aufgabengebiet Landwirtschaft werden Direktzahlungen an die Bauernbetriebe geleistet (60% der Ausgaben), Produktion und Absatz...</span>\n                                <a href="#" class="pull-right">\n                                    <span>mehr</span>\n                                    <span class="fa fa-chevron-right"></span>\n                                </a>\n                            </p>\n                        </div>\n                    </div>\n                </li>\n                <li class="strate-item panel panel-secondary">\n                    <a href="#" class="strate-heading panel-heading">\n                        <span class="strate-icon toggle"></span>\n                        <span>Kommentar zum Budget 2015</span>\n                    </a>\n                    <div class="strate-panel strate-extension">\n                        <div class="panel-body">\n                            <p>\n                                <span>Die Beziehungen zum Ausland sind wie in den Vorjahren gepr&auml;gt durch den markanten Anstieg der Ausgaben f&uuml;r die Entwicklungszusammen-arbeit. D&auml;mpfend auf das Wachstum wirkt sich...</span>\n                                <a href="#" class="pull-right">\n                                    <span>mehr</span>\n                                    <span class="fa fa-chevron-right"></span>\n                                </a>\n                            </p>\n                            <p>\n                                <span>Die Ausgaben f&uuml;r die Landwirtschaft und Ern&auml;hrung sinken um 3,6 Prozent. Dies aufgrund der teilweisen Umsetzung des KAP 2014, der Kompensation von Mindereinnahmen...</span>\n                                <a href="#" class="pull-right">\n                                    <span>mehr</span>\n                                    <span class="fa fa-chevron-right"></span>\n                                </a>\n                            </p>\n                            <p>\n                                <a role="button">\n                                    <span class="fa fa-file-pdf-o fa-3x pull-left text-danger"></span>\n                                    <span>Gesamter Text zu den Aufgabengebieten herunterladen</span>\n                                    <span class="fa fa-download"></span>\n                                </a>\n                                <span class="text-muted">(3 Seiten)</span>\n                            </p>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n	</div>\n\n</div>\n')}]),angular.module("charts/highchart.tpl.html",[]).run(["$templateCache",function(a){a.put("charts/highchart.tpl.html",'<highchart config="highchartConfig"></highchart>\n')}]),angular.module("home/home.tpl.html",[]).run(["$templateCache",function(a){a.put("home/home.tpl.html",'<div class="headline headline-lg">\n	<h1>\n		<img src="./images/oblique-small.png" alt="{{\'application.longName\' | translate}}">\n		<span class="nowrap">{{\'application.longName\' | translate}}</span>\n	</h1>\n	<p class="lead">{{\'application.description\' | translate}}</p>\n	<button class="btn btn-primary btn-lg" ui-sref="charts.chartjs">\n		<span class="fa fa-line-chart"></span>\n		<span>Charts</span>\n	</button>\n</div>\n\n\n')}]),angular.module("stats/stats.tpl.html",[]).run(["$templateCache",function(a){a.put("stats/stats.tpl.html",'<div class="default-layout centered-layout">\n    <section class="section-breath-bottom">\n        <h2 class="section-title">\n            Loading-time for series data\n        </h2>\n        <p class="section-subtitle">\n            Time to download data for a given serie (5o years). Each serie\'s data is stored in a different JSON file.\n        </p>\n        <table class="table table-striped">\n            <thead>\n                <tr>\n                    <th>Network</th>\n                    <th>Time [ms] - Average of 10 measurement</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="data in loadingData">\n                    <td>{{data.network}}</td>\n                    <td>{{data.time}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </section>\n\n    <section class="section-breath-bottom">\n        <h2 class="section-title">\n            Rendering performance\n        </h2>\n        <p class="section-subtitle">\n            Time needed to render the chart (15 years) using two different libraries (<a href="http://www.chartjs.org/">Chart.js</a> and <a href="http://www.highcharts.com/">Highchart</a>). Tested on Windows 8 (32 GB RAM, Intel i7 QuadCore 2.40GHz) with Chrome v44.\n        </p>\n        <table class="table table-striped">\n            <thead>\n            <tr>\n                <th>Series</th>\n                <th>Chart.js [ms]</th>\n                <th>Highchart [ms]</th>\n                <th>Chart.js (Bar) [ms]</th>\n                <th>Highchart (Bar) [ms]</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="data in renderingData">\n                <td>{{data.series}}</td>\n                <td>{{data.chartjs}}</td>\n                <td>{{data.highchart}}</td>\n                <td>{{data.chartjs_bar}}</td>\n                <td>{{data.highchart_bar}}</td>\n            </tr>\n            </tbody>\n        </table>\n        <canvas class="chart-base" chart-type="chart.type"\n                data="chart.data" labels="chart.labels" series="chart.series"\n                legend="true" click="onClick" colours="chartjsColors">\n        </canvas>\n    </section>\n</div>')}]),function(){"use strict";angular.module("oblique.core",[])}(),function(){"use strict";angular.module("oblique.core").controller("AppController",["CONFIG","SessionService","AuthService","$scope","$rootScope","$state","$log","$translate","LoadingService",function(a,b,c,d,e,f,g,h,i){var j=this,k=g.getInstance("AppController");j.context=b.context,j.spinner=i.loading,j.title=a.title,j.page={title:"",description:a.description||"",layout:a.defaults.layout||"default"},j.locale={current:a.defaults.locale||"en",use:function(a){h.use(a)}},j.isAuthenticated=c.isAuthenticated,j.logout=c.logout,e.$on("$stateChangeStart",function(a,b){b.resolve&&(j.spinner.active=!0)}),e.$on("$stateChangeSuccess",function(b,c){$("html, body").animate({scrollTop:0},0),j.page.title=c.data&&c.data.title?c.data.title:"states."+c.name+".title",j.page.description=c.data&&c.data.description?c.data.description:a.description||"",j.page.layout=c.data&&c.data.layout?c.data.layout:"default",j.spinner.active=!1}),e.$on("$stateChangeError",function(a,b,c,d,e,g){k.error(g),j.spinner.active=!1,f.reload(d)}),e.$on("$translateChangeSuccess",function(a,b){j.locale.current=b.language})}])}(),function(){"use strict";angular.module("oblique.core").controller("TableController",["$scope",function(a){a.selectedRow=-1,a.selectRow=function(b){a.selectedRow=b}}])}(),function(){"use strict";angular.module("oblique.core").directive("tableNavigable",function(){function a(a,c,d){var e,f;e=c.find(":focus"),e.is(".dropdown-toggle")||0!==e.parents(".dropdown-menu").length||(a.preventDefault(),f=b(c,d),f.focus())}function b(a,b){var d,e;return d=a.find("tbody tr.selected"),b===c.up?e=d.prev():b===c.down&&(e=d.next()),e}var c={up:38,down:40};return{restrict:"A",link:function(b,d){d.keydown(function(b){var e=b.keyCode;(e===c.up||e===c.down)&&a(b,d,e)})}}})}(),function(){"use strict";angular.module("oblique.core").directive("dropdownClosable",["$timeout",function(a){function b(b){a(function(){var a=b.parent().find(":focus");0===a.length&&(b.attr("aria-expanded",!1),b.parent().removeClass("open"))},1)}return{restrict:"A",link:function(a,c){c.blur(function(){b(c)}),c.parent().find("a").blur(function(){b(c)})}}}])}(),function(){"use strict";angular.module("oblique.core").directive("enter",["$timeout",function(){return{restrict:"A",link:function(a,b,c){b.keydown(function(d){13===d.keyCode&&b.is(d.target)&&(a.$apply(function(){a.$eval(c.enter)}),d.preventDefault())})}}}])}(),function(){"use strict";var a=angular.module("oblique.core");a.directive("delayedChange",function(){var a=500;return{restrict:"A",require:"ngModel",scope:{ngModel:"=",delayedChange:"&"},link:function(b,c,d){var e=null,f=d.delay&&parseInt(d.delay,10)||a;b.$watch("ngModel",function(a,c){angular.equals(a,c)||(e&&window.clearTimeout(e),e=window.setTimeout(function(){b.delayedChange()},f))},!0)}}})}(),function(){"use strict";var a=angular.module("oblique.core");a.directive("labeledCheckbox",function(){return{restrict:"E",require:"ngModel",scope:{ngModel:"=",value:"=",label:"@label",checkboxId:"@checkboxId"},template:'<div class="checkbox"><input type="checkbox" id="{{checkboxId}}" checklist-model="ngModel" checklist-value="value"/><label for="{{checkboxId}}">{{label}}</label></div>',link:function(){}}})}(),function(){"use strict";var a=angular.module("oblique.core");a.directive("rangeSlider",function(){return{restrict:"E",scope:{ngModel:"=ngModel",min:"@",max:"@",step:"=step"},template:'<div ui-slider="sliderOptions" min="{{min}}" max="{{max}}" step="{{step}}" ng-model="ngModel"></div>',link:function(a){a.sliderOptions={range:!0,slide:function(b,c){a.setupTooltip(b,c)},change:function(b,c){a.setupTooltip(b,c)}},a.setupTooltip=function(a,b){$(b.handle).html('<div class="range-slider-tooltip">'+b.value+"</div>")}}}})}(),function(){"use strict";angular.module("oblique.core").config(["$provide",function(a){a.decorator("$log",["CONFIG","$delegate","$injector",function(a,b,c){function d(a,d){return function(){var g=[].slice.call(arguments),h=moment().format()+" - ["+d+"]";if(h+=g[0]&&g[0]instanceof Error?g[0].message:JSON.stringify(g),b[a](h),f&&!e(g)){c.get("$http")}}}function e(a){return a&&a[0]&&a[0].config&&a[0].config.url&&a[0].config.url.indexOf(f)>-1}b.getInstance=function(a){return{log:d("log",a),info:d("info",a),warn:d("warn",a),error:d("error",a),debug:d("debug",a)}};var f=a.api&&a.api.logs;return b}])}])}(),function(){"use strict";angular.module("oblique.core").factory("$httpDecorator",["CONFIG","$http",function(a,b){function c(a){return function(){var c=[].slice.call(arguments);return c[0]=b.api.url+c[0],a.apply(null,c).then(function(a){return a.data})}}return{decorate:function(){b.api=b.api||{},b.api.url=a.api.url,b.api.head=c(b.head),b.api.get=c(b.get),b.api.post=c(b.post),b.api.put=c(b.put),b.api["delete"]=c(b["delete"]),b.api.patch=c(b.patch),b.api.isApiCall=function(a){return a.indexOf(b.api.url)>-1}}}}])}(),function(){"use strict";angular.module("oblique.core").factory("HttpInterceptor",["CONFIG","$q","$log","$injector","NotificationService","LoadingService",function(a,b,c,d,e,f){function g(a){return l().api.isApiCall(a.url)&&!k(a)&&f.start(),a}function h(a){return b.reject(a)}function i(a){var b=l();return b.api.isApiCall(a.config.url)&&f.stop(),a}function j(a){var c=l();return c.api.isApiCall(a.config.url)&&f.stop(),a.data&&a.data.error&&a.data.error.errors?a.data.error.errors.forEach(function(a){e.add(a.messageSeverity,"error.business."+a.messageKey)}):a.status>=500&&!k(a.config)&&e.add("error","error.http.status."+a.status),m.error(a),b.reject(a)}function k(a){return a&&a.data&&a.data.silent}function l(){return d.get("$http")}var m=c.getInstance("HttpInterceptor");return{request:g,requestError:h,response:i,responseError:j}}])}(),function(){"use strict";angular.module("oblique.core").config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){var c=b.get("$log").getInstance("$exceptionHandler");return function(a,b){c.error(a,b)}}])}])}(),function(){"use strict";angular.module("oblique.core").directive("notifications",["NotificationService",function(a){return{restrict:"AE",replace:!0,scope:!1,controller:["$scope","$element","$attrs",function(){var b=this;b.alertType={"default":"alert animationFadeIn animationFadeOut",info:"alert alert-info animationFadeIn animationFadeOut",success:"alert alert-success animationFadeIn animationFadeOut",warning:"alert alert-warning animationFadeIn animationFadeOut",error:"alert alert-danger animationFadeIn"},b.notifications=a.notifications,b.isClosable=function(a){return a.sticky},b.remove=function(b){a.remove(b.id)}}],controllerAs:"notificationCtrl",bindToController:!0,template:'<div class="animationFadeIn" ng-repeat="notification in notificationCtrl.notifications"><div class="{{notificationCtrl.alertType[notification.type]}}"><button ng-click="notificationCtrl.remove(notification)" ng-show="notificationCtrl.isClosable(notification)" type="button" class="close">&times;</button><p><strong>{{("notification.type." + notification.type) | translate}}</strong> {{notification.messageKey | translate}}</p></div></div>',link:function(){}}}])}(),function(){"use strict";angular.module("oblique.core").provider("NotificationService",function(){var a=1500,b=[],c={"default":{priority:0},info:{priority:1},success:{priority:2},warning:{priority:3},error:{priority:4}};return{setTimeout:function(b){a=b},$get:["$timeout",function(d){function e(c,e,g){g||"error"!==c||(g=!0);var j={id:i,type:c,messageKey:e,sticky:g};b.unshift(j),b.sort(h),g||d(function(){f(j.id)},2*a),i++}function f(a){b.forEach(function(c,d){a===c.id&&b.splice(d,1)})}function g(){b.length=0}function h(a,b){return c[a.type].priority<c[b.type].priority}var i=0;return{notifications:b,add:e,remove:f,clear:g}}]}})}(),function(){"use strict";angular.module("oblique.core").service("SessionService",function(){this.context={user:null},this.create=function(a,b,c){console.log(b),this.id=a,this.context.user=b,this.userRole=c},this.destroy=function(){this.id=null,this.context.user=null,this.userRole=null}})}(),function(){"use strict";angular.module("oblique.core").factory("AuthService",["$http","$auth","SessionService",function(a,b,c){var d={};return d.init=function(a){return c.create("TODO: session",a,"TODO: role"),a},d.resolve=function(){return a.api.get("/me").then(function(a){return d.init(a)})},d.login=function(a){return b.login(a).then(function(a){return d.init(a)})},d.logout=function(){return b.logout().then(function(){return c.destroy()})},d.register=function(a){return b.signup(a).then(function(){return d.init(a)})},d.isAuthenticated=function(){return b.isAuthenticated()},d.isAuthorized=function(a){return angular.isArray(a)||(a=[a]),d.isAuthenticated()&&-1!==a.indexOf(c.context.user.role)},d}])}(),function(){"use strict";angular.module("oblique.core").provider("LoadingService",function(){var a=1e4;return{setTimeout:function(b){a=b},$get:["$log","$timeout","NotificationService",function(b,c,d){function e(){var b=h;g.push({id:h,timeout:c(function(){var a=_.filter(g,function(a){return a.id===b});"undefined"!=typeof a&&(f(),d.add("error","error.other.timeout"))},a)}),h++,i.active=g.length>0}function f(){g.length<=0||(c.cancel(g.shift().timeout),i.active=g.length>0)}var g=[],h=0,i={active:!1};return{loading:i,start:e,stop:f}}]}})}(),function(){"use strict";angular.module("oblique.auth",["ui.router"]).config(["$stateProvider",function(a){a.state("auth",{url:"/auth",templateUrl:"auth/auth.tpl.html",controller:"AuthController",data:{layout:"cover"}})}])}(),function(){"use strict";angular.module("oblique.auth").controller("AuthController",["$scope","$state","$http","AuthService","NotificationService",function(a,b,c,d,e){a.user={email:"info@bit.admin.ch",password:"12345678"},a.login=function(){e.clear(),d.login(a.user).then(function(a){e.add("success",a.message||"states.auth.login.success"),b.go("home")},function(a){e.add("error",a.data.message||"states.auth.login.error")})},a.logout=function(){e.clear(),d.logout().then(function(a){e.add("success",a.message||"states.auth.logout.success"),b.go("home")},function(a){e.add("error",a.data.message||"states.auth.logout.error")})},a.register=function(){e.clear(),d.register(a.user).then(function(a){e.add("success",a.message||"states.auth.register.success"),b.go("home")},function(a){e.add("error",a.data.message||"states.auth.register.error")})}}])}(),function(){"use strict";angular.module("oblique.home",["ui.router"]).config(["$stateProvider",function(a){a.state("home",{url:"/home",templateUrl:"home/home.tpl.html",controller:"HomeController",data:{description:"states.home.description"}})}])}(),function(){"use strict";angular.module("oblique.home").controller("HomeController",["$scope","$state",function(a,b){a.query=null,a.search=function(){b.go("auth",{query:a.query})}}])}(),function(){"use strict";angular.module("oblique.charts",["ui.router"]).config(["$stateProvider",function(a){a.state("charts",{url:"/charts",templateUrl:"charts/charts.tpl.html",controller:"ChartsController",data:{description:"states.charts.description"},resolve:{chartConf:["ChartsService",function(a){return a.init()}]}}).state("charts.chartjs",{url:"/chartjs",templateUrl:"charts/chartjs.tpl.html"}).state("charts.highchart",{url:"/highchart",templateUrl:"charts/highchart.tpl.html"})}])}(),function(){"use strict";var a=angular.module("oblique.charts");a.factory("ChartsService",["$q","ChartsResource",function(a,b){var c={_conf:null,_years:[],_seriesData:{},_seriesColor:{},range:{min:0,max:0,current:[1995,2010]},series:[],_buildConf:function(){c.range.min=Number.MAX_VALUE,c.range.max=Number.MIN_VALUE,c.series=c._conf.series,c.series=c.series.slice(0,20),c._years=[],_.each(c.series,function(a){c._seriesColor[a.id]=c._generateRandomColor()}),_.each(_.range(c._conf.years.from,c._conf.years.to+1),function(a){a>c.range.max&&(c.range.max=a),a<c.range.min&&(c.range.min=a),c._years.push(a)}),c.range.current[0]<c.range.min&&(c.range.current[0]=c.range.min),c.range.current[1]>c.range.max&&(c.range.current[1]=c.range.max)},_range:function(a){var b=_.indexOf(c._years,c.range.current[0]),d=_.indexOf(c._years,c.range.current[1])+1;return _.slice(a,b,d)},_compress:function(a,b){var c,d,e=[];for(d=(a.length-1)/(b-1),c=0;b>c;c++)e.push(a[Math.round(c*d)]);return e},_prepare:function(a,b){var d=c._range(a);return b&&d.length>b&&(d=c._compress(d,b)),d},_generateRandomColor:function(){var a,b="0123456789ABCDEF".split(""),c="#";for(a=0;6>a;a++)c+=b[Math.floor(16*Math.random())];return c},init:function(){return b.getConf().then(function(a){c._conf=a.data,c._buildConf()})},getData:function(d,e){return a(function(a,f){var g=c._seriesData[d];g?a(c._prepare(g,e)):b.getData(d).then(function(b){var f=b.data.values;c._seriesData[d]=f,a(c._prepare(f,e))},function(a){f(a)})})},getColor:function(a){return c._seriesColor[a]},getLabels:function(a){return c._prepare(c._years,a)}};return c}])}(),function(){"use strict";var a=angular.module("oblique.charts");a.factory("ChartsResource",["$http",function(a){return{getConf:function(){return a.get("./data/conf.json")},getData:function(b){return a.get("./data/serie"+b+".json")}}}])}(),function(){"use strict";angular.module("oblique.charts").controller("ChartsController",["$scope","$timeout","ChartsService",function(a,b,c){a.series=c.series,a.range=c.range,a.chartjsColors=[],a.chartjsConfig={type:"Line",labels:[],series:[],data:[],options:{bezierCurve:!1,datasetFill:!1}},a.highchartConfig={options:{chart:{type:"line"}},plotOptions:{line:{animation:!1}},series:[],title:!1,yAxis:{title:{enabled:!1}},loading:!1},a.selection={series:[]},a.selection.series.push(a.series[0]),a.refresh=function(){a.chartjsConfig.series=_.pluck(a.selection.series,"title"),a.chartjsConfig.labels=c.getLabels(),a.chartjsConfig.data.length=0,a.highchartConfig.series.length=0,a.chartjsColors.length=0,_.each(a.selection.series,function(b){c.getData(b.id).then(function(d){var e=c.getColor(b.id);a.chartjsColors.push(e),a.chartjsConfig.data.push(d),a.highchartConfig.series.push({data:d,color:e})})})},a.$watchGroup(["range.current"],a.refresh),a.$watchCollection("selection.series",function(b,c){angular.equals(b,c)||a.refresh()}),a.$watch("chartjsConfig.type",function(){var b=a.chartjsConfig.type;a.highchartConfig.options.chart.type="Line"===b?"line":"column"}),a.onClick=function(a){console.log(a)}}])}(),function(){"use strict";angular.module("oblique.stats",["ui.router"]).config(["$stateProvider",function(a){a.state("stats",{url:"/stats",templateUrl:"stats/stats.tpl.html",controller:"StatsController",data:{description:"states.stats.description"}})}])}(),function(){"use strict";angular.module("oblique.stats").controller("StatsController",["$scope",function(a){a.loadingData=[{network:"Regular 2G (250 Kbps, 300ms RTT)",time:324.3},{network:"Regular 3G (750 Kbps, 100ms RTT)",time:109.1},{network:"WiFi (30 Mbps, 2ms RTT)",time:5.5}],a.renderingData=[{series:1,chartjs:38,highchart:78,chartjs_bar:25,highchart_bar:48},{series:2,chartjs:24,highchart:62,chartjs_bar:27,highchart_bar:56},{series:3,chartjs:29,highchart:65,chartjs_bar:29,highchart_bar:57},{series:4,chartjs:34,highchart:72,chartjs_bar:31,highchart_bar:65},{series:5,chartjs:43,highchart:80,chartjs_bar:33,highchart_bar:76},{series:6,chartjs:52,highchart:84,chartjs_bar:36,highchart_bar:77},{series:7,chartjs:61,highchart:94,chartjs_bar:36,highchart_bar:81},{series:8,chartjs:71,highchart:104,chartjs_bar:36,highchart_bar:99},{series:9,chartjs:80,highchart:114,chartjs_bar:39,highchart_bar:98},{series:10,chartjs:93,highchart:121,chartjs_bar:45,highchart_bar:112},{series:11,chartjs:109,highchart:130,chartjs_bar:46,highchart_bar:112},{series:12,chartjs:118,highchart:149,chartjs_bar:51,highchart_bar:124
},{series:13,chartjs:132,highchart:171,chartjs_bar:49,highchart_bar:124},{series:14,chartjs:148,highchart:166,chartjs_bar:55,highchart_bar:130},{series:15,chartjs:160,highchart:164,chartjs_bar:56,highchart_bar:146},{series:16,chartjs:186,highchart:165,chartjs_bar:61,highchart_bar:146},{series:17,chartjs:189,highchart:179,chartjs_bar:63,highchart_bar:103},{series:18,chartjs:232,highchart:183,chartjs_bar:69,highchart_bar:105},{series:19,chartjs:237,highchart:200,chartjs_bar:69,highchart_bar:106},{series:20,chartjs:259,highchart:198,chartjs_bar:70,highchart_bar:110}],a.chart={type:"Line",labels:_.range(1,20),series:["Chart.js","Highchart","Chart.js (Bar)","Highchart (Bar)"],data:[]};var b=[],c=[],d=[],e=[];_.each(a.renderingData,function(a){b.push(a.chartjs),c.push(a.chartjs_bar),d.push(a.highchart),e.push(a.highchart_bar)}),a.chart.data.push(b),a.chart.data.push(d),a.chart.data.push(c),a.chart.data.push(e)}])}();